{% extends "polls/menu.html" %}
{% load static %}

{% block links %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css" xmlns:>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css"/>
{% endblock %}

{% block titulo %}Web Crawling{% endblock %}

{% block cruzamento %}active{% endblock %}

{% block content %}

    <form method="POST" class="form-signin" action="/polls/cruzamento/auxilios/busca/">
        {% csrf_token %}

        <div class="form-group mb-3">
            <label for="bases">Bases de Dados:</label>
            <select class="select" id="bases" name="bases" onchange="regraBases(this)" multiple required>
                <option value="auxilio">Auxílio Emergencial</option>
                <option value="bolsa">Bolsa Família</option>
                <option value="orgao">Orgãos de Classe</option>
                <option value="prefeitura">Prefeitura</option>
            </select>
        </div>

        <input type="hidden" name="basesSelecionadas" id="basesSelecionadas" value="{{ bases }}" required>

        <div class="form-group mb-3">
            <label for="municipio">Município:</label>
            <select class="form-select" name="municipio" id="municipio" required>
                <option value="SANTA_CRUZ_DA_BAIXA_VERDE" {{ SANTA_CRUZ_DA_BAIXA_VERDE }}>Santa Cruz da Baixa Verde</option>
                <option value="SERRA_TALHADA" {{ SERRA_TALHADA }}>Serra Talhada</option>
                <option value="TRIUNFO" {{ TRIUNFO }}>Triunfo</option>
            </select>
        </div>

        <div class="form-group mb-3">
            <label for="tipoCruzamento">Tipo de Cruzamento:</label>
            <div class="d-flex">
                <select class="form-select" name="tipoCruzamento" id="tipoCruzamento">
                    <option value="intersecao" {{ intersecao }}>Interseção</option>
                    <option value="diferenca" {{ diferenca }}>Diferença</option>
                </select>
                <button type="button" id="info" class="btn" data-bs-toggle="popover" data-bs-title="Tipo de Cruzamento" data-bs-content="sdfasd" onclick="exibirPopover(this)" onblur="ocultarCampo(this)" ><i class="fas fa-exclamation-circle"></i></button>
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="nomeBeneficiario">Nome do Beneficíario:</label>
            <input type="text" class="form-control" id="nomeBeneficiario" name="nomeBeneficiario" value="{{ nome }}" placeholder="Nome">
        </div>
        <div class="form-group mb-3">
            <label for="nis">NIS:</label>
            <input type="text" class="form-control" id="nis" name="nis" value="{{ nis }}" placeholder="Número do NIS">
        </div>

        <button type="submit" id="buscar" class="btn btn-primary">Iniciar Cruzamento<i class="ui search icon"></i></button>
    </form>

    <div class="alert alert-danger mt-3" role="alert" id="alerta">
        Escolha no máximos duas bases de dados
    </div>

{% endblock %}

{% block optional %}
    {% if data != None and data != "" %}
        <div class="d-flex justify-content-center justify-content-lg-between p-4 border-bottom">
            {{ data | safe }}
        </div>
    {% endif %}
    <script src="{% static 'polls/cruzamento.js' %}"></script>
{% endblock %}
