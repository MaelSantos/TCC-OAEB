{% extends "polls/menu.html" %}
{% block cruzamento %}active{% endblock %}
{% load static %}

{% block links %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css" xmlns:>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
{% endblock %}

{% block content %}

   <header id="head" class="secondary"></header>

    <!-- container -->
    <div class="container">
        <div class="row">

            <!-- main content -->
            <section class="col-sm-12 maincontent">
                <header class="page-header">
                    <h1 class="page-title">Cruzamento entre Base de Dados</h1>
                </header>
                <h3>Texto observatorio</h3>
                <p>
                    <!-- <img src="assets/images/about.jpg" alt="" class="img-rounded pull-right" width="300"> -->
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eveniet, consequuntur eius repellendus eos aliquid molestiae ea laborum ex Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eveniet, consequuntur eius repellendus eos aliquid molestiae ea laborum ex quibusdam laudantium voluptates placeat consectetur quam aliquam beatae soluta accusantium iusto nihil nesciunt unde veniam magnam repudiandae sapiente.</p>
                <p>Consectetur adipisicing elit. Eveniet, consequuntur eius repellendus eos aliquid molestiae ea laborum ex quibusdam laudantium voluptates placeat consectetur quam aliquam beatae soluta accusantium iusto nihil nesciunt unde veniam magnam repudiandae sapiente.</p>
                <h3>Company Goals</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eveniet, consequuntur eius repellendus eos aliquid molestiae ea laborum ex quibusdam laudantium voluptates placeat consectetur quam aliquam beatae soluta accusantium iusto nihil nesciunt unde veniam magnam repudiandae sapiente. consequuntur eius repellendus eos aliquid molestiae ea laborum ex quibusdam laudantium voluptates placeat consectetur quam aliquam!</p>
            </section>
            <!-- /main -->

        </div>
    </div>
    <!-- /container -->
    <section class="team-content">
        <div class="container">
            <div class="row justify-content-center align-self-center">
                <div class="col col-md-8 col-xl-6 my-auto">
                    <!-- <div class="p-5 border-shadow"> -->
                        <div class="row" style="margin-top: 50px;">
                            <form method="POST" class="form-signin" action="/polls/cruzamento/auxilios/busca/">
                                {% csrf_token %}

                                <div class="d-flex justify-content-between">
                                    <div class="col-md-4 col-sm-6 col-xs-6">
                                        <div class="form-group mb-3">
                                            <label for="base1">Bases Principal:</label>
                                            <select class="form-control form-select" id="base1" name="base1" onchange="regraBases()" required>
                                                <option value=""></option>
                                                <option value="auxilio">Auxílio Emergencial</option>
                                                <option value="bolsa">Bolsa Família</option>
                                                <option value="orgao">Orgãos de Classe</option>
                                                <option value="prefeitura">Prefeitura</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-6 col-xs-6">
                                        <div class="form-group mb-3">
                                            <label for="base2">Bases Secundária:</label>
                                            <select class="form-control form-select" id="base2" name="base2" onchange="regraBases()">
                                                <option value=""></option>
                                                <option value="auxilio">Auxílio Emergencial</option>
                                                <option value="bolsa">Bolsa Família</option>
                                                <option value="orgao">Orgãos de Classe</option>
                                                <option value="prefeitura">Prefeitura</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class="form-group mb-3">
                                        <label for="municipio">Município:</label>
                                        <select class="form-control form-select" name="municipio" id="municipio" required>
                                            <option value="SANTA_CRUZ_DA_BAIXA_VERDE">Santa Cruz da Baixa Verde</option>
                                            <option value="SERRA_TALHADA">Serra Talhada</option>
                                            <option value="TRIUNFO">Triunfo</option>
                                            <option value="CALUMBI"> Calumbi</option>
                                            <option value="FLORESTA">Floresta</option>
                                            <option value="MIRANDIBA">Mirandiba</option>
                                            <option value="SAO_JOSE_DO_BELMONTE">São José do Belmonte</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class="form-group mb-3" id="divOrgaos">
                                        <label for="orgaos">Orgãos de Classe:</label>
                                        <select class="form-control form-select" name="orgaos" id="orgaos">
                                            <option value="medicina">Medicina (CFM)</option>
                                            <option value="advocacia">Advocacia (AOB)</option>
                                            <option value="engenharia">Engenharia (CONFEA)</option>
                                            <option value="odontologia">Odontologia (CFO)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-8 col-sm-8 col-xs-12" style="margin-bottom: 30px; padding: 0px;">
                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <label for="tipoCruzamento">Tipo de Cruzamento:</label>
                                        </div>
                                        <div class="col-md-10 col-sm-8 col-xs-6">
                                            <select class="form-control form-select" name="tipoCruzamento" id="tipoCruzamento">
                                                <option value="intersecao">Interseção</option>
                                                <option value="diferenca">Diferença</option>
                                            </select>
                                        </div>
                                        <div class="col-md-2 col-sm-2 col-xs-2">
                                            <button type="button" id="info" class="btn" data-bs-toggle="popover"
                                                data-bs-title="Tipo de Cruzamento" data-bs-content=" " onclick="exibirPopover(this)"
                                                onblur="ocultarCampo(this)" style="padding: 5px;"><i class="fa fa-exclamation-circle"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class="d-flex justify-content-center" style="padding: 0px 40px 0px 40px;">
                                        <div class="col-md-6 col-sm-6 col-xs-8" style="padding-left: 30px;">
                                            <!-- <div class="form-check form-switch m-2"> -->
                                            <input class="form-check-input " type="radio" id="todo_periodo" name="tipo_periodo"
                                                value="todo_periodo" onclick="regraPeriodo(this)">
                                            <label class="form-check-label" for="todo_periodo">Todo o Período</label>
                                            <!-- </div> -->
                                        </div>

                                        <div class="col-md-6 col-sm-6 col-xs-8" style="padding-left: 30px;">
                                            <!-- <div class="form-check form-switch m-2">  -->
                                            <input class="form-check-input" type="radio" id="informar_periodo" name="tipo_periodo"
                                                value="informar_periodo" onclick="regraPeriodo(this)">
                                            <label class="form-check-label" for="informar_periodo">Informar Período</label>
                                            <!-- </div> -->
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-12" style="margin-top: 30px;" id="divPeriodo">
                                    <div class="d-flex -flex justify-content-lg-between">
                                        <div class="col-md-6 col-sm-6 col-xs-8 form-group"  style="display: flex;">
                                            <label for="de" class="col-xs-3">De:</label>
                                            <input type="month" class="form-control" id="de" name="de" value="" placeholder="De">
                                        </div>
                                        <div class="col-md-6 col-sm-6 col-xs-8 form-group" style="display: flex;">
                                            <label for="ate" class="col-xs-3">Até:</label>
                                            <input type="month" class="form-control" id="ate" name="ate" value="" placeholder="Até">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-8 col-sm-8 col-xs-12" style="margin-top: 30px;">
                                    <div class="form-group mb-3">
                                        <label for="nomeBeneficiario">Nome:</label>
                                        <input type="text" class="form-control" id="nomeBeneficiario" name="nomeBeneficiario"
                                            value="" placeholder="Nome">
                                    </div>
                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class="form-group mb-3">
                                        <label for="nis">NIS:</label>
                                        <input type="text" class="form-control" id="nis" name="nis" value=""
                                            placeholder="Número do NIS">
                                    </div>
                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-12" style="display: flex; justify-content:  center; margin-top: 30px;">
                                    <button type="button" class="btn btn-primary" onclick="carregarDados()">Iniciar
                                        Cruzamento</button>
                                    <button type="submit" id="buscar" style="display: none;"> </button>
                                </div>
                            </form>
                        </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block optional %}
    {% if data != None and data != "" %}
        <form method="POST" action="/polls/cruzamento/salvar/pdf/" target="_blank">
            {% csrf_token %}
            <button type="button" class="btn btn-primary" onclick="salvarPdf()">Salvar PDF</button>
            <input type="text" id="htmlstring" name="htmlstring" style="display: none;">
            <button type="submit" id="salvar" style="display: none;"> </button>
        </form>

        <div class="d-flex justify-content-center justify-content-lg-between p-4 border-bottom" id="tabelaDados">
            {{ data | safe }}
        </div>
    {% endif %}

    <div class="modal fade" tabindex="-1" id="loadingModal" data-bs-backdrop="static" data-bs-keyboard="false" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="content m-5">
                    <center>
                        <div class="loader" id="loader"></div><br>
                        <h4><b id="loadingModal_content"></b></h4>
                    </center>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'polls/cruzamento.js' %}"></script>
{% endblock %}